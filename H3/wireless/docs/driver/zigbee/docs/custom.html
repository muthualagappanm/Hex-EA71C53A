<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Custom Device Type | Microchip MPLAB Harmony Wireless help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Custom Device Type" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Wireless package" /> <meta property="og:description" content="Harmony 3 Wireless package" /> <link rel="canonical" href="custom.html" /> <meta property="og:url" content="http://10.16.32.120:4000/wireless/driver/zigbee/docs/custom.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Wireless help" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://10.16.32.120:4000/wireless/driver/zigbee/docs/custom.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://10.16.32.120:4000/wireless/assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"headline":"Custom Device Type","description":"Harmony 3 Wireless package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="custom.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../../index.html" class="nav-list-link">Harmony 3 Wireless Package</a></li><li class="nav-list-item"><a href="custom.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../readme.html" class="nav-list-link">Driver libraries</a><ul class="nav-list "><li class="nav-list-item "><a href="../../ble/docs/readme.html" class="nav-list-link">BLE Driver Library</a></li><li class="nav-list-item "><a href="../../pic32cx-bz/docs/readme.html" class="nav-list-link">PIC32CX-BZ Device Support Component Library</a></li><li class="nav-list-item "><a href="readme.html" class="nav-list-link">Zigbee Driver Library</a></li></ul></li><li class="nav-list-item"><a href="custom.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../../ble/docs/release_notes.html" class="nav-list-link">BLE Driver Library</a></li><li class="nav-list-item "><a href="release_notes.html" class="nav-list-link">Zigbee Driver Library</a></li></ul></li><li class="nav-list-item"><a href="../../../mplab_harmony_license.html" class="nav-list-link">License</a></li><li class="nav-list-item"><a href="../../pic32cx-bz/docs/release_notes.html" class="nav-list-link">Microchip PIC32CX-BZ2 Device Support Release Notes</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony Wireless help" aria-label="Search Microchip MPLAB Harmony Wireless help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="custom.html">Wireless libraries</a></li> <li class="breadcrumb-nav-list-item"><a href="custom.html">Zigbee Library</a></li> <li class="breadcrumb-nav-list-item"><span>Custom Device Type</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="custom-device-type"> <a href="custom.html#custom-device-type" aria-labelledby="custom-device-type" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom device type </h1> <p>Microchip implements various lighting, home automation and other device types which are specifically defined by Zigbee Alliance. These device types mandate certain set of requirements defined by Zigbee Alliance. But Customer may have requirements with additional features or different set of requirements. In order to address this, Microchip implements Custom Device. Custom Device is aimed to create new device type according to user or personal specifications or preference.</p> <h2 id="custom-device-type-configuration-and-options"> <a href="custom.html#custom-device-type-configuration-and-options" aria-labelledby="custom-device-type-configuration-and-options" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom device type configuration and options </h2> <p>Custom device is fully customizable with respect to all areas of configuration. Code is generated with the selected configuration.</p> <p>The below description shows the configuration items at a macro level.</p> <p><img src="assets/mhcconfigconfigs.png" alt="10" /></p> <p>• Stack Configuration</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- User should be able to choose any of the below stack device types,
  - Coordinator
  - Router
  - End device
- User should be able to edit few important stack configurations,
  - Number of key pair descriptors
  - Binding table size
  - Neighbor table size
  - Routing table size
  - Address map table size
  - Maximum number of routers
  - Maximum number of children
  - End device sleep period.
</code></pre></div></div> <p>• Commissioning Configuration</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- User should be able to choose different / supported commissioning options,
  - Automatic Commissioning on Startup
  - Network Formation
  - Network Steering
  - Touchlink Commissioning
  - Finding and binding
  - Install Code only Joining
</code></pre></div></div> <p>• Application Configuration</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- User should be able to configure
  - Primary and Secondary channel mask or channel
  - Tx power set
  - Console commands groups
</code></pre></div></div> <p>• Green Power Configuration</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- User should be able to configure required Green Power Device Types
  - COMBO_BASIC
  - PROXY_BASIC
  - Disable translation table
  - Multi sensor support
</code></pre></div></div> <p>• Cluster Configuration</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- User should be able to choose the below
  - Cluster(s) from the available list of cluster pool
  - Cluster’s type of service – Server or Client or Both
  - Cluster Attributes
  - Cluster Rx or Tx Commands
  - Cluster pool has the following clusters
    1. Basic Cluster
    2. Identify Cluster
    3. Groups Cluster
    4. Scenes Cluster
    5. On Off Cluster
    6. Level Control Cluster
    7. Color Control Cluster
    8. Alarms Cluster
    9. Time Cluster
    10. Thermostat Cluster
    11.	Fan Control Cluster
    12.	Occupancy Sensing Cluster
    13.	Illuminance Measurement Cluster
    14.	Temperature Measurement Cluster
    15.	Water Content Measurement Cluster
	16. Thermostat UI Configuration Cluster
    17. IAS Zone Cluster
    18.	IAS ACE Cluster
    19.	Diagnostics Cluster
</code></pre></div></div> <h2 id="mhc-configuration-options--view"> <a href="custom.html#mhc-configuration-options--view" aria-labelledby="mhc-configuration-options--view" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC Configuration Options / View </h2> <p>MHC Configuration options is set to Manual Configuration for Custom device as default. For other device types ,Automatic Configuration is set as default.</p> <p><img src="http://10.16.32.120:4000/wireless/driver/zigbee/docs/assets/mhcconfigManual.png" alt="01" /></p> <h2 id="mhc-view--stack-configuration"> <a href="custom.html#mhc-view--stack-configuration" aria-labelledby="mhc-view--stack-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC View – Stack Configuration </h2> <p>MHC Stack Configuration provides the logical device selection where Coordinator, Router and End device are defined. By Default, Router is enabled which can start a new distributed network or join to an existing network. Refer Zigbee Core Specification for more details on the logical(stack) device type.</p> <p>Note : Most of the other configuration option changes based on the stack device type selection. In that regards , user needs to change this option before changing any other configurations.</p> <p><img src="assets/mhcconfigcustom.png" alt="02" /></p> <p>Some of the configurations gets affected with stack device type selection are as follows, • Commissioning configuration • Green Power configuration</p> <h2 id="mhc-view--commissioning-configuration"> <a href="custom.html#mhc-view--commissioning-configuration" aria-labelledby="mhc-view--commissioning-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC View – Commissioning Configuration </h2> <p><img src="assets/mhcconfigcommission.png" alt="03" /></p> <p>With MHC Commissioning Configuration, user should be able to choose which commissioning option is preferred. Refer the Zigbee BDB Specification on details of Network Formation commissioning, Network Steering Commissioning, Touchlink Commissioning and Finding &amp; binding commissioning.</p> <p>• Automatic Commissioning on Startup This can be enabled by setting “Automatic commissioning on startup” option in the MHC and it follows the procedure as per the recommended commissioning sequence.</p> <p>• Install code Only Joining Install code-based joining is the commissioning ability of a node either to allow devices in the network or join in the network only install code-based link key TCLK procedure.</p> <h2 id="mhc-view--application-configuration"> <a href="custom.html#mhc-view--application-configuration" aria-labelledby="mhc-view--application-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC View – Application Configuration </h2> <p><img src="assets/mhcconfigapp.png" alt="04" /></p> <p>Application configuration provides selection of channel or channel Mask, Tx power and required console commands from the group of console options.</p> <h2 id="mhc-view--green-power-configuration"> <a href="custom.html#mhc-view--green-power-configuration" aria-labelledby="mhc-view--green-power-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC View – Green Power Configuration </h2> <p><img src="assets/mhcconfigzgp.png" alt="05" /></p> <p>Green Power Configuration is enabled only when Coordinator or Router stack device type is chosen in Stack Configuration. Green Power (GP) Device Type Configuration provides options to choose Green Power Proxy Basic or Sink Basic which allows Green Power Devices in the network. Refer Green Power Specification for more details.</p> <h2 id="mhc-view--cluster-configuration"> <a href="custom.html#mhc-view--cluster-configuration" aria-labelledby="mhc-view--cluster-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC View – Cluster Configuration </h2> <p>Cluster configuration , a wide range of options provided to the customer based on the device / product requirement which can be aligned to the specification or custom build.</p> <p><img src="assets/mhcconfigclusterpool.png" alt="06" /></p> <p>User should be able to choose the required clusters from the above pool of clusters. Identify and groups Clusters are mandatory needed for base device finding and binding process ( As per the specification / standards) . So user has no option to modify this. For other clusters, user should be able to modify based on the need. Clusters can be Client or Server or Both and be able to select the required attributes and commands apart from the mandatory attributes and commands within that cluster. Code is generated based on the options chosen.</p> <p>For example, Basic Cluster is illustrated below and this is applicable for any other clusters.</p> <p><img src="assets/mhcconfigbasic1.png" alt="07" /></p> <p>User should be able to choose supported implementation with options below</p> <p><img src="assets/mhcconfigbasic2.png" alt="08" /></p> <p>When Client or Server Menu enabled , user should be able to select the required optional attributes and commands apart from the mandatory cluster attributes and commands.</p> <p><img src="http://10.16.32.120:4000/wireless/driver/zigbee/docs/assets/mhcconfigClientServerMenu.png" alt="09" /></p> <p>Implemenation Note: There is a restriction on selection of maximum clusters within Custom device type. Simple descriptor response which is sent out during finding and binding process cannot accommodate more than a defined payload size( as per zigbee standards). For the users , a warning will be shown in MHC Window when the he selects more than what is recommended.</p> <p><img src="assets/mhcconfigrestriction.png" alt="09" /></p> <h2 id="possible-device-types-using-custom"> <a href="custom.html#possible-device-types-using-custom" aria-labelledby="possible-device-types-using-custom" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Possible device types using custom </h2> <p>Device Type 1: A system can possibly have Light with occupancy sensor. Light operation based on occupancy. Required Macro level Configuration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Stack Device type as Zigbee Router
- Touchlink Commissioning
- Clusters – light clusters and occupancy sensing cluster
</code></pre></div></div> <p>Device Type 1: A system can possible have Fan with humidity sensor. If the humidity is reached certain range, fan can operate by itself. Required Macro level Configuration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Stack Device type as Zigbee End device
- Commissioning - Network Steering
- Clusters – humidity measurement cluster and fan control cluster
</code></pre></div></div> <p>Device Type 3: A system can possibly have Light alongside sensors and alarm. Required Macro level Configuration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Stack Device type as Zigbee Router
- Touchlink Commissioning
- Clusters – light clusters, Illuminance measurement with alarms and time cluster
</code></pre></div></div> <p>Device Type 4: A system can possibly have fingerprint sensor with alarm functionality. Required Macro level Configuration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Stack Device type as Zigbee End device
- Network Steering Commissioning
- Install code-based Joining {where in coordinator side known fingerprints are translated to install codes and installed. In end device side where the fingerprint scan occurs it initiates the joining with the detected fingerprint, remaining time, it sleeps and wakeup upon fingerprint scan}
- Clusters – alarm cluster
</code></pre></div></div> <p>Device Type 5: A system can possibly have a light with time cluster functionality. Required Macro level Configuration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Stack Device type as Zigbee Router
- Steering/Touchlink Commissioning
- Clusters – light clusters, time cluster
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='http://10.16.32.120:4000/wireless/assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
