<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="http://10.12.80.161:4000/wireless/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Zigbee Application Project Generation | Microchip MPLAB Harmony Wireless help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Zigbee Application Project Generation" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony Wireless package" /> <meta property="og:description" content="Harmony Wireless package" /> <link rel="canonical" href="zigbee_project_generation.html" /> <meta property="og:url" content="http://10.12.80.161:4000/wireless/apps/zigbee/zigbee_project_generation.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Wireless help" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Zigbee Application Project Generation" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://10.12.80.161:4000/wireless/assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"http://10.12.80.161:4000/wireless/apps/zigbee/zigbee_project_generation.html","headline":"Zigbee Application Project Generation","description":"Harmony Wireless package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="zigbee_project_generation.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../index.html" class="nav-list-link">Mplab Code Configurator Wireless Package</a></li><li class="nav-list-item active"><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../readme.html" class="nav-list-link">Examples applications</a><ul class="nav-list "><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/readme.html" class="nav-list-link">BLE Building Blocks</a><ul class="nav-list"><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/readme.html" class="nav-list-link">Peripheral Building Blocks</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/scan_ext_adv/readme.html" class="nav-list-link">BLE Extended Scan</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/readme.html" class="nav-list-link">Central Building Blocks</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/connection/readme.html" class="nav-list-link">BLE Connection(Central)</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/readme.html" class="nav-list-link">BLE Profiles and Services (Central)</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/trp_uart/readme.html" class="nav-list-link">Central Transparent UART</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/ml_trp_uart/readme.html" class="nav-list-link">Multi Transparent UART</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/chip_peripherals/uart/readme.html" class="nav-list-link">UART Demo</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/freertos_ble_stack_init_central.html" class="nav-list-link">Freetos Stack Init</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/legacy_adv_sleep/readme.html" class="nav-list-link">Legacy Advertisement</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/legacy_scan/readme.html" class="nav-list-link">Legacy Scan</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/connection/readme.html" class="nav-list-link">Peripheral Connection</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/ext_adv/readme.html" class="nav-list-link">Extended Advertisement</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/profiles_services/readme.html" class="nav-list-link">Profile and Services</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/profiles_services/custom_service/readme.html" class="nav-list-link">Custom Service</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/profiles_services/trp_uart/readme.html" class="nav-list-link">Proprietary UART Service</a> </li></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/advanced_applications/readme.html" class="nav-list-link">BLE Advance Applications</a><ul class="nav-list"><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_uart_demo/readme.html" class="nav-list-link">BLE UART Demo</a> </li><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_sensor_app/readme.html" class="nav-list-link">BLE Sensor DEMO</a> </li><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_sensor_app/protocol.html" class="nav-list-link">BLE Sensor (Protocol Exchange)</a> </li></ul></li><li class="nav-list-item active"><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="readme.html" class="nav-list-link">Zigbee</a><ul class="nav-list"><li class="nav-list-item "> <a href="low_power_configuration.html" class="nav-list-link">Zigbee Low Power Config</a> </li><li class="nav-list-item "> <a href="zigbee_commissioning.html" class="nav-list-link">Zigbee Commissioning Procedure</a> </li><li class="nav-list-item "> <a href="zigbee_greenpower.html" class="nav-list-link">Zigbee Green Power</a> </li><li class="nav-list-item active"> <a href="zigbee_project_generation.html" class="nav-list-link active">Zigbee Application Project Generation</a> </li><li class="nav-list-item "> <a href="zigbee_security_model.html" class="nav-list-link">Zigbee Network Security Models</a> </li><li class="nav-list-item "> <a href="zigbee_combined_interface/readme.html" class="nav-list-link">Zigbee Combined Interface</a> </li><li class="nav-list-item "> <a href="zigbee_lights/readme.html" class="nav-list-link">Zigbee Light</a> </li><li class="nav-list-item "> <a href="zigbee_lights/readme_distributed.html" class="nav-list-link">Zigbee light Distributed Network</a> </li><li class="nav-list-item "> <a href="zigbee_multisensor/readme.html" class="nav-list-link">Zigbee multisensor</a> </li></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../multiprotocol/readme.html" class="nav-list-link">Multiprotocol</a><ul class="nav-list"><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_basic/readme.html" class="nav-list-link">BLE+ZIGBEE Application</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_light_prov/readme.html" class="nav-list-link">Multiprotocol Demo App</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_light_prov/protocol.html" class="nav-list-link">Multiprotocol Demo</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_multiSensor_prov/readme.html" class="nav-list-link">Zigbee Multi-Sensor, commissioning App</a> </li></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../docs/readme.html" class="nav-list-link">User Docs</a><ul class="nav-list"><li class="nav-list-item "> <a href="consoleCommands.html" class="nav-list-link">Serial Console Commands</a> </li><li class="nav-list-item "> <a href="../docs/lowpower.html" class="nav-list-link">Low Power</a> </li><li class="nav-list-item "> <a href="../docs/user_action.html" class="nav-list-link">User Action</a> </li><li class="nav-list-item "> <a href="../docs/generate_code.html" class="nav-list-link">MCC Code Generation</a> </li><li class="nav-list-item "> <a href="../docs/creating_new_mplabx_harmony_project.html" class="nav-list-link">Generating New MCC Harmony Code</a> </li><li class="nav-list-item "> <a href="../docs/pic32cx_bz2_wbz45x_sdk_setup.html" class="nav-list-link">SDK Setup</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../ble/advanced_applications/ble_uart_demo/release_notes.html" class="nav-list-link">BLE UART Demo</a></li><li class="nav-list-item "><a href="../ble/advanced_applications/ble_sensor_app/release_notes.html" class="nav-list-link">BLE Sensor</a></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/profiles_services/trp_uart/release_notes.html" class="nav-list-link">BLE Tranparent UART (Peirpheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/chip_peripherals/uart/release_notes.html" class="nav-list-link">UART Hello World</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/legacy_adv_sleep/release_notes.html" class="nav-list-link">BLE Legacy Adv</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/ext_adv/release_notes.html" class="nav-list-link">BLE Extended Advertising</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/connection/release_notes.html" class="nav-list-link">BLE Connection (Peripheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/profiles_services/custom_service/release_notes.html" class="nav-list-link">BLE Tranparent UART (Peirpheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/connection/release_notes.html" class="nav-list-link">BLE Connection (Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/legacy_scan/release_notes.html" class="nav-list-link">BLE Legacy Scan</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/profiles_services/ml_trp_uart/release_notes.html" class="nav-list-link">BLE Multilink Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="zigbee_project_generation.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/profiles_services/trp_uart/release_notes.html" class="nav-list-link">BLE Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="../ble/building_blocks/central/scan_ext_adv/release_notes.html" class="nav-list-link">BLE Scan Extended Advertising</a></li><li class="nav-list-item "><a href="../multiprotocol/ble_zigbee_light_prov/release_notes.html" class="nav-list-link">Zigbee Multiprotocol Lights Prov App</a></li><li class="nav-list-item "><a href="../multiprotocol/ble_zigbee_multiSensor_prov/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor and commissioning</a></li><li class="nav-list-item "><a href="zigbee_lights/release_notes.html" class="nav-list-link">Zigbee Combined Interface App</a></li><li class="nav-list-item "><a href="zigbee_combined_interface/release_notes.html" class="nav-list-link">Zigbee Combined Interface App</a></li><li class="nav-list-item "><a href="zigbee_multisensor/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony Wireless help" aria-label="Search Microchip MPLAB Harmony Wireless help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../readme.html">Examples applications</a></li> <li class="breadcrumb-nav-list-item"><a href="readme.html">Zigbee</a></li> <li class="breadcrumb-nav-list-item"><span>Zigbee Application Project Generation</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="zigbee-application-project-generation"> <a href="zigbee_project_generation.html#zigbee-application-project-generation" aria-labelledby="zigbee-application-project-generation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Zigbee Application Project Generation </h1> <p>There are different zigbee device types supported in Microchip Zigbee framework. Few sample application projects are available as reference <a href="index.html"> here </a>. The projects for other device types can be generated by following the step by step procedure in this document.</p> <h2 id="--sdk-setup-"> <a href="zigbee_project_generation.html#--sdk-setup-" aria-labelledby="--sdk-setup-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # <a href="http://10.12.80.161:4000/wireless/apps/docs/pic32cx_bz2_wbz45x_sdk_setup.md"> SDK Setup </a> </h2> <h2 id="-generating-intended-device-type-project-using-mcc"> <a href="zigbee_project_generation.html#-generating-intended-device-type-project-using-mcc" aria-labelledby="-generating-intended-device-type-project-using-mcc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # Generating Intended Device Type Project using MCC </h2> <h3 id="pull-in-mcc-components"> <a href="zigbee_project_generation.html#pull-in-mcc-components" aria-labelledby="pull-in-mcc-components" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pull-in MCC Components </h3> <ol> <li> <p>Create a new MCC Harmony Project – <a href="http://10.12.80.161:4000/wireless/apps/docs/creating_new_mplabx_harmony_project.md"> link </a> for instructions</p> </li> <li> <p>Click on “+” symbol on the Intended Zigbee Device Type component from “Device Resources”</p> <ul> <li> <p>“OnOffLight” Device component is shown for example</p> </li> <li> <p>“Accept Dependencies or satisfiers, select “Yes””</p> </li> </ul> </li> </ol> <div style="text-align:center"><img src="doc/resources/MCC_1.png" /></div> <div style="text-align:center"><img src="doc/resources/MCC_2.png" /></div> <p><a name="tasks_1"> </a></p> <ol> <li>Add UART components needed for console logs and commands (optional)</li> </ol> <div style="text-align:center"><img src="doc/resources/MCC_5.png" /></div> <ol> <li>Verify if the Project Graph window has all the expected MCC configurations</li> </ol> <div style="text-align:center"><img src="doc/resources/MCC.png" /></div> <h3 id="generate-code-by-following-instructions--here"> <a href="zigbee_project_generation.html#generate-code-by-following-instructions--here" aria-labelledby="generate-code-by-following-instructions--here" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generate Code by Following Instructions <a href="http://10.12.80.161:4000/wireless/apps/docs/generate_code.md"> here</a> </h3> <hr /> <h2 id="-files-and-routines-automatically-generated-by-mcc"> <a href="zigbee_project_generation.html#-files-and-routines-automatically-generated-by-mcc" aria-labelledby="-files-and-routines-automatically-generated-by-mcc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # Files and Routines Automatically generated by MCC </h2> <p>After generating the code from MCC tool by clicking Generate, below is the project folder structure.</p> <div style="text-align:center"><img src="doc/resources/code_2.png" /></div> <h3 id="1-zigbee-stack-initialization-and-application-callback-registration"> <a href="zigbee_project_generation.html#1-zigbee-stack-initialization-and-application-callback-registration" aria-labelledby="1-zigbee-stack-initialization-and-application-callback-registration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Zigbee Stack Initialization and Application callback registration: </h3> <ul> <li> <p>The RF System, ZIGBEE, PERIPHERAL initialization routine executed during program initialization can be found in <strong>SYS_Initialize()</strong> of <strong>initialization.c</strong> file</p> </li> <li> <p>Zigbee Stack provides various APIs for application, and those APIs belong to the specific module within dedicated group. The sequence of initialization is already taken care in the stack when <strong>Zigbee_Init()</strong> from <strong>initialization.c</strong> is called.</p> </li> </ul> <div style="text-align:center"><img src="doc/resources/code_1.png" /></div> <ul> <li>Zigbee Stack generate events to inform application if there is any status changed or activity. Application may need to get the relevant information from Zigbee Stack and do the corresponding procedure.</li> </ul> <div style="text-align:center"><img src="doc/resources/code_3.png" /></div> <h3 id="2-zigbee-stack-application-events-handling"> <a href="zigbee_project_generation.html#2-zigbee-stack-application-events-handling" aria-labelledby="2-zigbee-stack-application-events-handling" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Zigbee Stack application events handling: </h3> <p><strong>app.c</strong> file is autogenerated and has a state machine for application callback handling from Zigbee stacks</p> <div style="text-align:center"><img src="doc/resources/code_4.png" /></div> <hr /> <h2 id="-user-application-development"> <a href="zigbee_project_generation.html#-user-application-development" aria-labelledby="-user-application-development" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # User Application Development </h2> <h3 id="1-compile-mcc-auto-generated-project"> <a href="zigbee_project_generation.html#1-compile-mcc-auto-generated-project" aria-labelledby="1-compile-mcc-auto-generated-project" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Compile MCC auto generated project </h3> <p>a) Compile the MCC auto generated project as below</p> <div style="text-align:center"><img src="doc/resources/build.png" /></div> <div style="text-align:center"><img src="doc/resources/error.png" /></div> <p>b) Addressing the mandatory error: User action required in app_idle_task.c. Follow the steps mentioned in the note and do the necessary changes. Then comment the <strong>#error</strong> message as below.</p> <div style="text-align:center"><img src="doc/resources/error1.png" /></div> <h3 id="2-edit-device-unique-id-zigbeeappdeviceselecth"> <a href="zigbee_project_generation.html#2-edit-device-unique-id-zigbeeappdeviceselecth" aria-labelledby="2-edit-device-unique-id-zigbeeappdeviceselecth" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Edit device unique ID (zigbeeAppDeviceSelect.h) </h3> <p>All the zigbee devices/modules will hold their unique IEEE address purchased from IEEE. For the demo purpose, where UID is not present in internal NVM, the pre-compiled fixed UID to be used. Edit the CS_UID to user defined value and not matching with combined interface UID (default 0xbee) as below in <strong>zigbeeAppDeviceSelect.h</strong></p> <div style="text-align:center"><img src="doc/resources/uid.png" /></div> <hr /> <h2 id="-programming-the-application-using-mplabx-ide"> <a href="zigbee_project_generation.html#-programming-the-application-using-mplabx-ide" aria-labelledby="-programming-the-application-using-mplabx-ide" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # Programming the Application using MPLABX IDE </h2> <p>Build the project after doing all the above changes and program on Curiosity board</p> <div style="text-align:center"><img src="doc/resources/program.png" /></div> <hr /> <h2 id="-hints-custom-code-modification-app_zigbee_handlerc"> <a href="zigbee_project_generation.html#-hints-custom-code-modification-app_zigbee_handlerc" aria-labelledby="-hints-custom-code-modification-app_zigbee_handlerc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # Hints: Custom code modification (app_zigbee_handler.c) </h2> <p>There will be 3 major events which the stack would provide to the user application in <strong>app_zigbee_handler.c</strong> file. They are ,</p> <ul> <li>Zigbee Events which is defined as “EVENT_ZIGBEE”</li> <li>ZCL and Cluster Events defined as “EVENT_CLUSTER”</li> <li>Board Specific Package (BSP) Events defined as “EVENT_BSP”</li> </ul> <h3 id="1-zcl-event_cluster-event-handling"> <a href="zigbee_project_generation.html#1-zcl-event_cluster-event-handling" aria-labelledby="1-zcl-event_cluster-event-handling" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. ZCL EVENT_CLUSTER event handling </h3> <p>For more details regarding clusters, please refer to, the specification from Zigbee Alliance -&gt; <a href="https://zigbeealliance.org/wp-content/uploads/2019/12/07-5123-06-zigbee-cluster-library-specification.pdf" target="_top">Link to Zigbee Cluster Library Specification by Zigbee Alliance</a></p> <p>ZCL specific cluster events are received in ZCL EVENT_CLUSTER <strong>Cluster_Event_Handler()</strong> in application layer. For the all the supported device types, most of the ZCL specific activities are automatically handled in middleware. If user wish to take some action of ZCL events, can do changes in this Cluster_Event_Handler() for the specific ZCL event.</p> <h3 id="2-event_bsp-event-handling"> <a href="zigbee_project_generation.html#2-event_bsp-event-handling" aria-labelledby="2-event_bsp-event-handling" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. EVENT_BSP event handling </h3> <p>In addition to above ZCL event, BSP event will also be called when specific ZCL command is received. <strong>BSP_Event_Handler()</strong> API is called for EVENT_BSP event. This will enable the user to write the board specific functionality code like switch on/off the on board LED, controlling the thermostat. Refer to <a href="http://10.12.80.161:4000/wireless/apps/zigbee/zigbee_lights/firmware/src/app_zigbee/app_zigbee_handler.c"> Extended Light BSP Handling </a></p> <hr /> <h2 id="-hints-zigbee-specific-mcc-configurations"> <a href="zigbee_project_generation.html#-hints-zigbee-specific-mcc-configurations" aria-labelledby="-hints-zigbee-specific-mcc-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> # Hints: Zigbee Specific MCC Configurations </h2> <ul> <li>Harmony3 based Microchip Zigbee stack framework allows, user to do different configurations and generate the code based on that configurations.</li> </ul> <div style="text-align:center"><img src="doc/resources/conf.png" /></div> <h3 id="1-auto-and-manual-configuration"> <a href="zigbee_project_generation.html#1-auto-and-manual-configuration" aria-labelledby="1-auto-and-manual-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Auto and Manual Configuration </h3> <ul> <li>When the device type component is added in project graph, the default it will be auto configuration. All the allowable configurations will take already defined default values in the generated code.</li> <li>Enabling “Manual Configuration” will allow user to change the configurations.</li> </ul> <div style="text-align:center"><img src="doc/resources/conf_1.png" /></div> <h3 id="2-stack-configuration"> <a href="zigbee_project_generation.html#2-stack-configuration" aria-labelledby="2-stack-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Stack Configuration </h3> <ul> <li>Zigbee stack specific configurations like routing table size, maximum allowable children to get joined in one parent, etc., can be changed based on the customer application use case. The changed configurations will be reflected in <strong>stackConfig.h</strong>.</li> </ul> <p><strong>Tip:</strong> <i> The table size configurations will have impact on RAM memory size. So, care must be taken while choosing the values.</i></p> <div style="text-align:center"><img src="doc/resources/conf_2.png" /></div> <h3 id="3-commissioning-configuration"> <a href="zigbee_project_generation.html#3-commissioning-configuration" aria-labelledby="3-commissioning-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Commissioning Configuration </h3> <ul> <li>Commissioning is the process of initializing the devices to join a network and to work together. The Zigbee Base Device Behaviour specification specifies the procedures for different commissioning mechanisms. H3 configuration allows user to configure this from configurator. The details of different commissioning procedure is explained in <a href="http://10.12.80.161:4000/wireless/apps/zigbee/zigbee_commissioning.md"> Zigbee Commissioning </a></li> </ul> <p>These configuration changes are reflected in <strong>zigbeeAppConfig.h</strong>.</p> <div style="text-align:center"><img src="doc/resources/conf_3.png" /></div> <h3 id="4-application-configuration"> <a href="zigbee_project_generation.html#4-application-configuration" aria-labelledby="4-application-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Application Configuration </h3> <ul> <li>Application specific configurations like enabling the console commands is done here.</li> <li>The console based commands would be practically needed during development stage. This may not be needed end product stage. So, this configuration gives flexibility to enable/disable based on the need. <ul> <li>“Enable Zigbee Console Commands” to be checked always.</li> <li>When the console command is enabled, make sure the required UART driver is configured as done in <a href="zigbee_project_generation.html#tasks_1">UART Component Addition</a> The details of manual commands and usage is explained <a href="http://10.12.80.161:4000/wireless/apps/zigbee/consoleCommands.md"> Console commands </a></li> </ul> </li> <li>Another configuration is zigbee primary/secondary channel masks configuration. Zigbee supports 16 channels (channel 11 to 26) in 2.4GHz frequency band. These 16 channels are bit mapped to bits 11 to 26. For example in channel mask 0x0000800, bit 11 is set. This means channel 11 is enabled. These configuration changes are reflected in <strong>zigbeeAppConfig.h</strong> and <strong>stackConfig.h</strong> files.</li> </ul> <div style="text-align:center"><img src="doc/resources/conf_4.png" /></div> <h3 id="5-cluster-configuration"> <a href="zigbee_project_generation.html#5-cluster-configuration" aria-labelledby="5-cluster-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Cluster Configuration </h3> <ul> <li>All the supported mandatory and optional clusters in specific device type as per specification are implemented. The MCC configurator allows user to add/remove the optional clusters/attributes/commands.</li> </ul> <div style="text-align:center"><img src="doc/resources/conf_6.png" /></div> <p>For more details regarding Zigbee lighting and Occupancy device types, please refer to, Zigbee Lighting and Occupancy (ZLO) specification -&gt; <a href=" https://zigbeealliance.org/wp-content/uploads/2019/11/docs-15-0014-05-0plo-Lighting-OccupancyDevice-Specification-V1.0.pdf" target="_top">Link to Zigbee Lighting and Occupancy (ZLO) device Specification by Zigbee Alliance</a></p> <hr /> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='http://10.12.80.161:4000/wireless/assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
