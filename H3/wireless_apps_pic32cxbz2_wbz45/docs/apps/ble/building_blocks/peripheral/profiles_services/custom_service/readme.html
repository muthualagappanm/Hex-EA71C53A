<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="http://10.12.80.161:4000/wireless/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Custom Service | Microchip MPLAB Harmony Wireless help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Custom Service" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony Wireless package" /> <meta property="og:description" content="Harmony Wireless package" /> <link rel="canonical" href="readme.html" /> <meta property="og:url" content="http://10.12.80.161:4000/wireless/apps/ble/building_blocks/peripheral/profiles_services/custom_service/readme.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Wireless help" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Custom Service" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://10.12.80.161:4000/wireless/assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"http://10.12.80.161:4000/wireless/apps/ble/building_blocks/peripheral/profiles_services/custom_service/readme.html","headline":"Custom Service","description":"Harmony Wireless package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="readme.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../../../../../index.html" class="nav-list-link">Mplab Code Configurator Wireless Package</a></li><li class="nav-list-item active"><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../readme.html" class="nav-list-link">Examples applications</a><ul class="nav-list "><li class="nav-list-item active"><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../readme.html" class="nav-list-link">BLE Building Blocks</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../readme.html" class="nav-list-link">Peripheral Building Blocks</a> </li><li class="nav-list-item "> <a href="../../../central/scan_ext_adv/readme.html" class="nav-list-link">BLE Extended Scan</a> </li><li class="nav-list-item "> <a href="../../../central/readme.html" class="nav-list-link">Central Building Blocks</a> </li><li class="nav-list-item "> <a href="../../../central/connection/readme.html" class="nav-list-link">BLE Connection(Central)</a> </li><li class="nav-list-item "> <a href="../../../central/profiles_services/readme.html" class="nav-list-link">BLE Profiles and Services (Central)</a> </li><li class="nav-list-item "> <a href="../../../central/profiles_services/trp_uart/readme.html" class="nav-list-link">Central Transparent UART</a> </li><li class="nav-list-item "> <a href="../../../central/profiles_services/ml_trp_uart/readme.html" class="nav-list-link">Multi Transparent UART</a> </li><li class="nav-list-item "> <a href="../../../chip_peripherals/uart/readme.html" class="nav-list-link">UART Demo</a> </li><li class="nav-list-item "> <a href="../../../central/freertos_ble_stack_init_central.html" class="nav-list-link">Freetos Stack Init</a> </li><li class="nav-list-item "> <a href="../../legacy_adv_sleep/readme.html" class="nav-list-link">Legacy Advertisement</a> </li><li class="nav-list-item "> <a href="../../../central/legacy_scan/readme.html" class="nav-list-link">Legacy Scan</a> </li><li class="nav-list-item "> <a href="../../connection/readme.html" class="nav-list-link">Peripheral Connection</a> </li><li class="nav-list-item "> <a href="../../ext_adv/readme.html" class="nav-list-link">Extended Advertisement</a> </li><li class="nav-list-item "> <a href="../readme.html" class="nav-list-link">Profile and Services</a> </li><li class="nav-list-item active"> <a href="readme.html" class="nav-list-link active">Custom Service</a> </li><li class="nav-list-item "> <a href="../trp_uart/readme.html" class="nav-list-link">Proprietary UART Service</a> </li></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../advanced_applications/readme.html" class="nav-list-link">BLE Advance Applications</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../advanced_applications/ble_uart_demo/readme.html" class="nav-list-link">BLE UART Demo</a> </li><li class="nav-list-item "> <a href="../../../../advanced_applications/ble_sensor_app/readme.html" class="nav-list-link">BLE Sensor DEMO</a> </li><li class="nav-list-item "> <a href="../../../../advanced_applications/ble_sensor_app/protocol.html" class="nav-list-link">BLE Sensor (Protocol Exchange)</a> </li></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../zigbee/readme.html" class="nav-list-link">Zigbee</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../zigbee/low_power_configuration.html" class="nav-list-link">Zigbee Low Power Config</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_commissioning.html" class="nav-list-link">Zigbee Commissioning Procedure</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_greenpower.html" class="nav-list-link">Zigbee Green Power</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_project_generation.html" class="nav-list-link">Zigbee Application Project Generation</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_security_model.html" class="nav-list-link">Zigbee Network Security Models</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_combined_interface/readme.html" class="nav-list-link">Zigbee Combined Interface</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_lights/readme.html" class="nav-list-link">Zigbee Light</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_lights/readme_distributed.html" class="nav-list-link">Zigbee light Distributed Network</a> </li><li class="nav-list-item "> <a href="../../../../../zigbee/zigbee_multisensor/readme.html" class="nav-list-link">Zigbee multisensor</a> </li></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../multiprotocol/readme.html" class="nav-list-link">Multiprotocol</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../multiprotocol/ble_zigbee_basic/readme.html" class="nav-list-link">BLE+ZIGBEE Application</a> </li><li class="nav-list-item "> <a href="../../../../../multiprotocol/ble_zigbee_light_prov/readme.html" class="nav-list-link">Multiprotocol Demo App</a> </li><li class="nav-list-item "> <a href="../../../../../multiprotocol/ble_zigbee_light_prov/protocol.html" class="nav-list-link">Multiprotocol Demo</a> </li><li class="nav-list-item "> <a href="../../../../../multiprotocol/ble_zigbee_multiSensor_prov/readme.html" class="nav-list-link">Zigbee Multi-Sensor, commissioning App</a> </li></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../docs/readme.html" class="nav-list-link">User Docs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../zigbee/consoleCommands.html" class="nav-list-link">Serial Console Commands</a> </li><li class="nav-list-item "> <a href="../../../../../docs/lowpower.html" class="nav-list-link">Low Power</a> </li><li class="nav-list-item "> <a href="../../../../../docs/user_action.html" class="nav-list-link">User Action</a> </li><li class="nav-list-item "> <a href="../../../../../docs/generate_code.html" class="nav-list-link">MCC Code Generation</a> </li><li class="nav-list-item "> <a href="../../../../../docs/creating_new_mplabx_harmony_project.html" class="nav-list-link">Generating New MCC Harmony Code</a> </li><li class="nav-list-item "> <a href="../../../../../docs/pic32cx_bz2_wbz45x_sdk_setup.html" class="nav-list-link">SDK Setup</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../../advanced_applications/ble_uart_demo/release_notes.html" class="nav-list-link">BLE UART Demo</a></li><li class="nav-list-item "><a href="../../../../advanced_applications/ble_sensor_app/release_notes.html" class="nav-list-link">BLE Sensor</a></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../trp_uart/release_notes.html" class="nav-list-link">BLE Tranparent UART (Peirpheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../chip_peripherals/uart/release_notes.html" class="nav-list-link">UART Hello World</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../legacy_adv_sleep/release_notes.html" class="nav-list-link">BLE Legacy Adv</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../ext_adv/release_notes.html" class="nav-list-link">BLE Extended Advertising</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../connection/release_notes.html" class="nav-list-link">BLE Connection (Peripheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="release_notes.html" class="nav-list-link">BLE Tranparent UART (Peirpheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../central/connection/release_notes.html" class="nav-list-link">BLE Connection (Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../central/legacy_scan/release_notes.html" class="nav-list-link">BLE Legacy Scan</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../central/profiles_services/ml_trp_uart/release_notes.html" class="nav-list-link">BLE Multilink Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="readme.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../central/profiles_services/trp_uart/release_notes.html" class="nav-list-link">BLE Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="../../../central/scan_ext_adv/release_notes.html" class="nav-list-link">BLE Scan Extended Advertising</a></li><li class="nav-list-item "><a href="../../../../../multiprotocol/ble_zigbee_light_prov/release_notes.html" class="nav-list-link">Zigbee Multiprotocol Lights Prov App</a></li><li class="nav-list-item "><a href="../../../../../multiprotocol/ble_zigbee_multiSensor_prov/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor and commissioning</a></li><li class="nav-list-item "><a href="../../../../../zigbee/zigbee_lights/release_notes.html" class="nav-list-link">Zigbee Combined Interface App</a></li><li class="nav-list-item "><a href="../../../../../zigbee/zigbee_combined_interface/release_notes.html" class="nav-list-link">Zigbee Combined Interface App</a></li><li class="nav-list-item "><a href="../../../../../zigbee/zigbee_multisensor/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony Wireless help" aria-label="Search Microchip MPLAB Harmony Wireless help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../../../readme.html">Examples applications</a></li> <li class="breadcrumb-nav-list-item"><a href="../../../readme.html">BLE Building Blocks</a></li> <li class="breadcrumb-nav-list-item"><span>Custom Service</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="ble-custom-serviceperipheral"> <a href="readme.html#ble-custom-serviceperipheral" aria-labelledby="ble-custom-serviceperipheral" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> BLE Custom Service(Peripheral) </h1> <p><a href="../../../readme.html">Getting Started</a></p> <p><a href="../../readme.html">Getting Started with Peripheral Building Blocks</a></p> <p><a href="../../connection/readme.html">BLE Connection</a> <strong>–&gt;</strong> <a href="../readme.html">Profiles and Services</a> <strong>–&gt;</strong> <a href="readme.html">BLE Custom Service</a></p> <h2 id="introduction"> <a href="readme.html#introduction" aria-labelledby="introduction" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>This tutorial will help users create a peripheral device with custom profile and control the RGB LEDs on the WBZ451 Curiosity board and button on the WBZ451 Curiosity board shall be used to enable or disable the LED status. Peripheral device will be WBZ45x Device and Central device can be a Smartphone with Light Blue App.The instructions mentioned below are applicable for a BLE Peripheral device.</p> <p>Users of this document can choose to just run the precompiled Application Example hex file on the WBZ451 Curiosity board and experience the demo or can go through the steps involved in developing this Application from scratch.</p> <h2 id="recommended-reads"> <a href="readme.html#recommended-reads" aria-labelledby="recommended-reads" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recommended Reads </h2> <ol> <li><a href="../../connection/readme.html">BLE Connection(peripheral)</a></li> </ol> <h2 id="hardware-required"> <a href="readme.html#hardware-required" aria-labelledby="hardware-required" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Required </h2> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Tool</strong></th> <th><strong>Qty</strong></th> </tr> </thead> <tbody> <tr> <td>WBZ451 Curiosity Board</td> <td>1</td> </tr> <tr> <td>Micro USB cable</td> <td>1</td> </tr> </tbody> </table></div> <h2 id="sdk-setup"> <a href="readme.html#sdk-setup" aria-labelledby="sdk-setup" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SDK Setup </h2> <ol> <li><a href="../../../../../docs/pic32cx_bz2_wbz45x_sdk_setup.html">SDK Setup</a></li> </ol> <h2 id="software"> <a href="readme.html#software" aria-labelledby="software" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Software </h2> <ol> <li><a href="https://ttssh2.osdn.jp/index.html.en">TeraTerm</a></li> </ol> <h2 id="smartphone-app"> <a href="readme.html#smartphone-app" aria-labelledby="smartphone-app" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Smartphone App </h2> <ol> <li>Light Blue</li> </ol> <h2 id="programming-the-precompiled-hex-file-or-application-example"> <a href="readme.html#programming-the-precompiled-hex-file-or-application-example" aria-labelledby="programming-the-precompiled-hex-file-or-application-example" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming the precompiled hex file or Application Example </h2> <h3 id="programming-the-hex-file-using-mplabx-ipe"> <a href="readme.html#programming-the-hex-file-using-mplabx-ipe" aria-labelledby="programming-the-hex-file-using-mplabx-ipe" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming the hex file using MPLABX IPE </h3> <ol> <li> <p>Precompiled Hex file is located <a href="hex/index.html"> here </a></p> </li> <li> <p>Follow the steps mentioned <a href="https://microchipdeveloper.com/ipe:programming-device">here</a></p> </li> </ol> <p><strong>Caution:</strong> Users should choose the correct Device and Tool information</p> <h3 id="programming-the-application-using-mplabx-ide"> <a href="readme.html#programming-the-application-using-mplabx-ide" aria-labelledby="programming-the-application-using-mplabx-ide" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming the Application using MPLABX IDE </h3> <ol> <li> <p>Follow steps mentioned in section 4 of <a href="../../../../../docs/pic32cx_bz2_wbz45x_sdk_setup.html">SDK Setup</a> document</p> </li> <li> <p>Open and program the Application Example <a href="firmware/index.html"> custom_service </a> in MPLABX IDE</p> </li> </ol> <h2 id="demo-description"> <a href="readme.html#demo-description" aria-labelledby="demo-description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Demo Description </h2> <p>Upon programming the demo application, WBZ45x will start Advertising (connectable), central device (Smartphone) scanning for these advertisements will connect to the device. In case of using Light Blue App search for “pic32cx-bz” and connect. After a connection has been made Button and RGB LED status can be read and RGB LED can be controlled from the central device (Smartphone - Light Blue App). Button status will be notified if subscribed from central device (Smartphone).</p> <p>Demo will print various events on a terminal emulator like TeraTerm @ (Speed: 115200, Data: 8-bit, Parity: none, stop bits: 1 bit, Flow control: none).</p> <ul> <li>Start of the advertisement - “[BLE] Device Initialized. Ready for connection.”</li> <li>Connection completed - “[BLE] Connected to Peer Device : <device address="">” &amp; “[BLE] Connection Handle: <handle>”</handle></device></li> <li>Write Request received - “[BLE] GATT Write ATTR Handle 0x<handle>”</handle></li> <li>Read Request received - “[BLE] GATT Read ATTR Handle 0x<handle>”</handle></li> <li>Recevied RGB Data - “[BLE] RGB LED data 0x<Red Data=""> 0x<Green Data=""> 0x<Blue Data="">”</Blue></Green></Red></li> <li>Button press event - “[BLE] Custom Service Button Event : RGB LED ON” &amp; “[BLE] Custom Service Button Event : RGB LED OFF”</li> <li>BLE Disconnected - “[BLE] Disconnected Handle: %d, Reason: 0x<reason_code>”.</reason_code></li> </ul> <h2 id="testing"> <a href="readme.html#testing" aria-labelledby="testing" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing </h2> <p>This section assumes that user has programmed the Application Example on the WBZ451 Curiosity Board <strong>Demo Experience when using a Smartphone (Light Blue App) as Central Device</strong></p> <ul> <li> <p>Reset the WBZ451 Curiosity board, Open Terminal emulator like Tera Term, select the right COM port@ (Speed: 115200, Data: 8-bit, Parity: none, stop bits: 1 bit, Flow control: none).</p> </li> <li> <p>open Light Blue App on your smartphone, Search and select the advertisement with Device Name “pic32cx-bz”</p> <p><img src="media/ble_adv.jpg" alt="" /></p> </li> <li> <p>Once connected on Blue App on your smartphone, basic info like Adervetisement Data and Device information will be avilable”</p> <p><img src="media/ble_connect.jpg" alt="" /></p> </li> <li> <p>Once connected on Blue App on your smartphone, find the custom service with the UUID 4d434850-5255-42d0-aef8-881facf4ceea” Two characteristics will be avilable on the custom service.Button characteristics with Readable,Notify property and RGB LED characteristics with Readable,Writable property</p> <p><img src="media/ble_custom_service.jpg" alt="" /></p> </li> <li> <p>Click on the button characteristics which will have read option and subscribe. Read will give the current status of the button.</p> <p><img src="media/ble_cs_button_characteristics.jpg" alt="" /></p> </li> <li> <p>Click on the button characteristics subscribe option to listen for button change events.Button press activity will be notified to the central device without read intiated and toggle the RGB LEDs.</p> <p><img src="media/ble_cs_button_characteristics_notify.jpg" alt="" /> <img src="media/ble_cs_button_characteristics_notify1.jpg" alt="" /></p> </li> <li> <p>Click on the RGB LED characteristics which will have read and write option. Read will give the current values stored for the RGB LEDs.Value of zero will turn off the LED. Other than zero value will turn on LED.</p> <p><img src="media/ble_cs_rgb_led_characteristics.jpg" alt="" /></p> </li> <li> <p>Click on the button characteristics write option provides option to write info which will change the RGB LED on/off condition.Read again to get the updated value for RGB LEDs.</p> <p><img src="media/ble_cs_rgb_led_characteristics1.jpg" alt="" /> <img src="media/ble_cs_rgb_led_characteristics2.jpg" alt="" /></p> </li> <li> <p>press back to disconnect the ble connection. Disconnected device will advertise again.</p> <p><img src="http://10.12.80.161:4000/wireless/apps/ble/building_blocks/peripheral/profiles_services/custom_service/media/ble_disconnect.PNG" alt="" /></p> </li> <li> <p>Every event will be notified in the terminal emulator.</p> </li> </ul> <h2 id="developing-this-application-from-scratch-using-mplab-code-configurator"> <a href="readme.html#developing-this-application-from-scratch-using-mplab-code-configurator" aria-labelledby="developing-this-application-from-scratch-using-mplab-code-configurator" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Developing this Application from scratch using MPLAB Code Configurator </h2> <p>This section explains the steps required by a user to develop this application example from scratch using MPLABx Code Configurator</p> <p><strong>Tip:</strong> New users of MPLAB Code Configurator are recommended to go through the <a href="https://onlinedocs.microchip.com/pr/GUID-1F7007B8-9A46-4D03-AEED-650357BA760D-en-US-6/index.html?GUID-B5D058F5-1D0B-4720-8649-ACE5C0EEE2C0">overview</a>.</p> <ol> <li> <p>Create a new MCC Harmony Project – <a href="../../../../../docs/creating_new_mplabx_harmony_project.html">link</a> for instructions</p> </li> <li> <p>Import component configuration – This step helps users setup the basic components required to start their Application Development component configuration related to this Application is available <a href="http://10.12.80.161:4000/wireless/apps/ble/building_blocks/peripheral/profiles_services/custom_service/firmware/ble_custom_service_button_led_wbz451.X/ble_custom_service_button_led_wbz451.mc3">here</a> <br /> Users should follow the instructions mentioned <a href="https://microchipdeveloper.com/mcc:peripheralconfig">here</a> to import the component configuration.</p> <p><strong>Tip:</strong> Import and Export functionality of component configuration will help users to start from a known working setup of configuration</p> </li> <li> <p>Accept Dependencies or satisfiers, select “Yes”</p> </li> <li> <p>Verify if the Project Graph window has all the expected configuration</p> <p><img src="http://10.12.80.161:4000/wireless/apps/ble/building_blocks/peripheral/profiles_services/custom_service/ble_custom_service_graph.jpg" alt="" /></p> </li> </ol> <h2 id="verify-custom-service-configuration"> <a href="readme.html#verify-custom-service-configuration" aria-labelledby="verify-custom-service-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Verify Custom Service Configuration </h2> <ol> <li> <p>Select <strong>BLE_Stack</strong> component in project graph</p> <p><img src="media/Configuration_ble_stack.jpg" alt="" /></p> </li> <li> <p>Select <strong>FreeRTOS</strong> component in project graph</p> <p><img src="media/Configuration_FreeRTOS.jpg" alt="" /></p> </li> <li> <p>Select <strong>SERCOM0</strong> component in project graph</p> <p><img src="media/Configuration_SERCOM0.jpg" alt="" /></p> </li> <li> <p>Select <strong>System</strong> component in project graph</p> <p><img src="media/Configuration_SERCOM0_1.jpg" alt="" /></p> </li> <li> <p>Select <strong>EIC</strong> component in project graph</p> <p><img src="media/Configuration_EIC.jpg" alt="" /></p> </li> <li> <p>Select <strong>Customized Service</strong> component in project graph</p> <p><img src="media/Configuration_CustomService.jpg" alt="" /> <img src="media/Configuration_CustomService_C0.jpg" alt="" /> <img src="media/Configuration_CustomService_C1.jpg" alt="" /></p> </li> <li> <p>Verify the <strong>Pin Configuration</strong> and <strong>Clock Configuration</strong> from tools option as per low power guide.</p> </li> </ol> <h2 id="generate-code-link-for-instructions"> <a href="readme.html#generate-code-link-for-instructions" aria-labelledby="generate-code-link-for-instructions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generate Code <a href="../../../../../docs/generate_code.html">link</a> for instructions </h2> <h2 id="files-and-routines-automatically-generated-by-the-mcc"> <a href="readme.html#files-and-routines-automatically-generated-by-the-mcc" aria-labelledby="files-and-routines-automatically-generated-by-the-mcc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Files and Routines Automatically generated by the MCC </h2> <p>After generating the program source from MCC interface by clicking Generate Code, the BLE custom service can be found in the following project directories</p> <p><img src="media/ble_CS_Code.jpg" alt="" /></p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Source Files</strong></th> <th><strong>Usage</strong></th> </tr> </thead> <tbody> <tr> <td>app.c</td> <td>Application State machine, includes calls for Initialization of all BLE stack (GAP,GATT, SMP, L2CAP) related componenet configurations</td> </tr> <tr> <td>app_ble.c</td> <td>Source Code for the BLE stack related componenet configurations, code related to function calls from app.c</td> </tr> <tr> <td>app_ble_handler.c</td> <td>All GAP, GATT, SMP and L2CAP Event handlers</td> </tr> <tr> <td>ble_button_led_svc.c</td> <td>All Custom Service button RGB LEDs configurations and functions</td> </tr> </tbody> </table></div> <ul> <li>app_ble_custom_service header and source files can be copied from the reference application.</li> </ul> <blockquote> <p><strong>Tip:</strong> app.c is autogenerated and has a state machine based</p> </blockquote> <p>The <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/MPLAB%20Harmony%20OSAL%20Libraries%20Help%20v2.06.pdf">OSAL</a>, RF System, BLE System initialization routine executed during program initialization can be found in the project files. This initialization routine is automatically generated by the MCC</p> <p><img src="media/ble_CS_app_CodeInit0.jpg" alt="" /></p> <h2 id="user-application-development"> <a href="readme.html#user-application-development" aria-labelledby="user-application-development" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User Application Development </h2> <h3 id="initialize-advertisementcustom-service-and-eic-in-app_tasks-function-in-file-appc"> <a href="readme.html#initialize-advertisementcustom-service-and-eic-in-app_tasks-function-in-file-appc" aria-labelledby="initialize-advertisementcustom-service-and-eic-in-app_tasks-function-in-file-appc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initialize Advertisement,Custom Service and EIC in APP_Tasks function in file app.c </h3> <p>Add the code for enable advertisement,customer service intilization and button external interrupt callback functions in the APP_STATE_INIT.</p> <p><img src="media/ble_CS_CodeInit.jpg" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        /* Application's initial state. */
        case APP_STATE_INIT:
        {
            bool appInitialized = true;
            //appData.appQueue = xQueueCreate( 10, sizeof(APP_Msg_T) );
            APP_BleStackInit();
            RTC_Timer32Start();
            BLE_GAP_SetAdvEnable(0x01, 0); //Enable BLE Advertisement
            BLE_BUTTON_LED_Add();
            APP_Button_Init();
            SYS_CONSOLE_PRINT("[BLE] Device Initialized. Ready for connection. \r\n");
</code></pre></div></div> <h3 id="handle-the-button-and-rgb-led-events-in-app_tasks-function-in-file-appc"> <a href="readme.html#handle-the-button-and-rgb-led-events-in-app_tasks-function-in-file-appc" aria-labelledby="handle-the-button-and-rgb-led-events-in-app_tasks-function-in-file-appc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handle the button and RGB LED events in APP_Tasks function in file app.c </h3> <p>Add the RGB and button handlers to the function APP_Tasks() in app.c file.</p> <p><img src="media/ble_CS_Code_app_state.jpg" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        case APP_STATE_SERVICE_TASKS:
        {
            if (OSAL_QUEUE_Receive(&amp;appData.appQueue, &amp;appMsg, OSAL_WAIT_FOREVER))
            {
//                if(p_appMsg-&gt;msgId==APP_MSG_BLE_STACK_EVT)
//                {
//                    // Pass BLE Stack Event Message to User Application for handling
//                    APP_BleStackEvtHandler((STACK_Event_T *)p_appMsg-&gt;msgData);
//                }

                switch (p_appMsg-&gt;msgId)
                {
                    case APP_MSG_BLE_STACK_EVT:
                    {
                        APP_BleStackEvtHandler((STACK_Event_T *)p_appMsg-&gt;msgData);
                    }
                    break;
                    case APP_MSG_BLE_CS_LED_EVT:
                    {
                        APP_CustomService_RGB_Handler((uint8_t *)((STACK_Event_T *)p_appMsg-&gt;msgData));
                    }
                    break;
                    case APP_MSG_BLE_CS_BUTTON_EVT:
                    {
                        APP_CustomService_Button_Handler();
                    }
                    break;
                }
            }
            break;
        }	   
</code></pre></div></div> <h3 id="add-the-msg-ids-for-the-button-and-rgb-led-events-in-file-apph"> <a href="readme.html#add-the-msg-ids-for-the-button-and-rgb-led-events-in-file-apph" aria-labelledby="add-the-msg-ids-for-the-button-and-rgb-led-events-in-file-apph" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add the msg ids for the button and RGB LED events in file app.h </h3> <p><img src="media/ble_CS_Code_app_h_state.jpg" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	typedef enum APP_MsgId_T
	{
		APP_MSG_BLE_STACK_EVT,
		APP_MSG_ZB_STACK_EVT,
		APP_MSG_ZB_STACK_CB,
		APP_MSG_BLE_CS_LED_EVT,
		APP_MSG_BLE_CS_BUTTON_EVT,        
		APP_MSG_STACK_END
	} APP_MsgId_T;
</code></pre></div></div> <h3 id="add-the-custom-service-filecustom_servicefirmwaresrcapp_ble_custom_servicech-which-has-the-supporting-functions-for-button-led-custom-service-file"> <a href="readme.html#add-the-custom-service-filecustom_servicefirmwaresrcapp_ble_custom_servicech-which-has-the-supporting-functions-for-button-led-custom-service-file" aria-labelledby="add-the-custom-service-filecustom_servicefirmwaresrcapp_ble_custom_servicech-which-has-the-supporting-functions-for-button-led-custom-service-file" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add the custom service file(\custom_service\firmware\src\app_ble_custom_service.c/.h) which has the supporting functions for Button LED Custom service file. </h3> <p><img src="media/ble_CS_FileInclusion.jpg" alt="" /></p> <h3 id="print-the-required-information-on-the-connect-and-discoonect-events-in-file-app_ble_handlerc"> <a href="readme.html#print-the-required-information-on-the-connect-and-discoonect-events-in-file-app_ble_handlerc" aria-labelledby="print-the-required-information-on-the-connect-and-discoonect-events-in-file-app_ble_handlerc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Print the required information on the connect and discoonect events in file app_ble_handler.c </h3> <p>Add the required variables, functions and callback handlers for GATT read/write response in the file ble_handler.c along with the connect and disconnect .</p> <p><img src="media/ble_CS_Code_ble_handler_header.jpg" alt="" /> <img src="media/ble_CS_Cod_ble_handler_variable.jpg" alt="" /> <img src="media/ble_CS_Cod_ble_handler_connect.jpg" alt="" /> <img src="media/ble_CS_Cod_ble_handler_disconnect.jpg" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void APP_BleGapEvtHandler(BLE_GAP_Event_T *p_event)
{
    switch(p_event-&gt;eventId)
    {
        case BLE_GAP_EVT_CONNECTED:
        {
            /* TODO: implement your application code.*/
            SYS_CONSOLE_PRINT("[BLE] Connected to Peer Device: 0x");
            for(int8_t idx=(GAP_MAX_BD_ADDRESS_LEN-1); idx&gt;=0; idx--)
            {
                SYS_CONSOLE_PRINT("%02x", p_event-&gt;eventField.evtConnect.remoteAddr.addr[idx]);
            }
            SYS_CONSOLE_PRINT("\n\r[BLE] Connection Handle: %d\n\r",p_event-&gt;eventField.evtConnect.connHandle);
            G_ConnHandle = p_event-&gt;eventField.evtConnect.connHandle;
        }
        break;

        case BLE_GAP_EVT_DISCONNECTED:
        {
            /* TODO: implement your application code.*/
            SYS_CONSOLE_PRINT("[BLE] Disconnected Handle: %d, Reason: 0x%X\n\r",p_event-&gt;eventField.evtDisconnect.connHandle,
            p_event-&gt;eventField.evtDisconnect.reason);
            G_ConnHandle = 0;
            BLE_GAP_SetAdvEnable(0x01, 0); //Enable BLE Advertisement             
        }
        break;
</code></pre></div></div> <h3 id="add-the-functions-for-the-gatt-read-and-write-handlers-which-will-act-on-the-received-gatt-request-in-file-app_ble_handlerc"> <a href="readme.html#add-the-functions-for-the-gatt-read-and-write-handlers-which-will-act-on-the-received-gatt-request-in-file-app_ble_handlerc" aria-labelledby="add-the-functions-for-the-gatt-read-and-write-handlers-which-will-act-on-the-received-gatt-request-in-file-app_ble_handlerc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add the functions for the GATT read and write handlers which will act on the received GATT request in file app_ble_handler.c. </h3> <p><img src="media/ble_CS_Cod_ble_handler_read_write.jpg" alt="" /> <img src="media/ble_CS_Cod_ble_handler_ReadWriteHandle.jpg" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void APP_GattSEvtReadHandler(GATT_EvtRead_T p_event)
{

    uint8_t error = 0;
    uint16_t status;
    SYS_CONSOLE_PRINT("[BLE] GATT Read ATTR Handle 0x%X \r\n",p_event.attrHandle);

    if ((p_event.attrHandle &lt;= BUTTON_LED_START_HDL) ||
        (p_event.attrHandle &gt; BUTTON_LED_END_HDL))
    {
        /* Not BLE Custom Service characteristic. */
        return;
    }

        switch(p_event.attrHandle)
        {
            case BUTTON_LED_HDL_CHAR_0:                            /**&lt; Handle of characteristic 0. */
            case BUTTON_LED_HDL_CCCD_0:                            /**&lt; Handle of characteristic 0 CCCD . */
            case BUTTON_LED_HDL_CHAR_1:                            /**&lt; Handle of characteristic 1. */
            case BUTTON_LED_HDL_CHARVAL_1:                         /**&lt; Handle of characteristic 1 value. */
                error = ATT_ERRCODE_APPLICATION_ERROR;
                break;
            case BUTTON_LED_HDL_CHARVAL_0:                         /**&lt; Handle of characteristic 0 value. */                
//                SYS_CONSOLE_PRINT(" ATTR Handle Read 0x%X \r\n",p_event.attrHandle);
                break;
        }

    if ((p_event.readType == ATT_READ_REQ)
    || (p_event.readType == ATT_READ_BLOB_REQ))
    {
        if (!error)
        {
            sp_trsReadRespParams = (GATTS_SendReadRespParams_T *)OSAL_Malloc(sizeof(GATTS_SendReadRespParams_T));
            if (sp_trsReadRespParams == NULL)
            {
                return;
            }
            trsRespErrConnHandle = p_event.connHandle;
            sp_trsReadRespParams-&gt;responseType = ATT_READ_RSP;
            sp_trsReadRespParams-&gt;attrLength = 0x01;
            sp_trsReadRespParams-&gt;attrValue[0]= bleCSdata.rgbOnOffStatus;            
//            sp_trsReadRespParams-&gt;attrLength = 0x03;
//            sp_trsReadRespParams-&gt;attrValue[0]= bleCSdata.RGB_LED.Red;
//            sp_trsReadRespParams-&gt;attrValue[1]= bleCSdata.RGB_LED.Green;
//            sp_trsReadRespParams-&gt;attrValue[2]= bleCSdata.RGB_LED.Blue;
            status = GATTS_SendReadResponse(p_event.connHandle, sp_trsReadRespParams);
            if (status == MBA_RES_SUCCESS)
            {
                OSAL_Free(sp_trsReadRespParams);
                sp_trsReadRespParams = NULL;
            }
        }
        else
        {
            sp_trsErrParams = (GATTS_SendErrRespParams_T *)OSAL_Malloc(sizeof(GATTS_SendErrRespParams_T));
            if (sp_trsErrParams == NULL)
            {
                return;
            }
            trsRespErrConnHandle = p_event.connHandle;
            sp_trsErrParams-&gt;reqOpcode = p_event.readType;
            sp_trsErrParams-&gt;attrHandle = p_event.attrHandle;
            sp_trsErrParams-&gt;errorCode = error;
            status = GATTS_SendErrorResponse(p_event.connHandle, sp_trsErrParams);
            if (status == MBA_RES_SUCCESS)
            {
                OSAL_Free(sp_trsErrParams);
                sp_trsErrParams = NULL;
            }
        }
    }   
}

void APP_GattSEvtWriteHandler(GATT_EvtWrite_T p_event)
{
    uint8_t error = 0;
    uint16_t status;
    SYS_CONSOLE_PRINT("[BLE] GATT Write ATTR Handle 0x%X \r\n",p_event.attrHandle);

    if ((p_event.attrHandle &lt;= BUTTON_LED_START_HDL) ||
        (p_event.attrHandle &gt; BUTTON_LED_END_HDL))
    {
        /* Not BLE Custom Service characteristic. */
        error = ATT_ERRCODE_INVALID_HANDLE;
        return;
    }

        switch(p_event.attrHandle)
        {
            case BUTTON_LED_HDL_CHAR_0:                            /**&lt; Handle of characteristic 0. */
            case BUTTON_LED_HDL_CHARVAL_0:                         /**&lt; Handle of characteristic 0 value. */
            case BUTTON_LED_HDL_CCCD_0:                            /**&lt; Handle of characteristic 0 CCCD . */
            case BUTTON_LED_HDL_CHAR_1:                            /**&lt; Handle of characteristic 1. */
                error = ATT_ERRCODE_APPLICATION_ERROR;
                break;
            case BUTTON_LED_HDL_CHARVAL_1:                         /**&lt; Handle of characteristic 1 value. */
//                SYS_CONSOLE_PRINT(" ATTR Handle %d \r\n",p_event.attrHandle);
                APP_CustomService_RGB_Callback(p_event.writeValue);
                break;
        }

    if ((p_event.writeType == ATT_WRITE_REQ)
    || (p_event.writeType == ATT_PREPARE_WRITE_REQ))
    {
        if (!error)
        {
            sp_trsRespParams = (GATTS_SendWriteRespParams_T *)OSAL_Malloc(sizeof(GATTS_SendWriteRespParams_T));
            if (sp_trsRespParams == NULL)
            {
                return;
            }
            trsRespErrConnHandle = p_event.connHandle;
            sp_trsRespParams-&gt;responseType = ATT_WRITE_RSP;
            status = GATTS_SendWriteResponse(p_event.connHandle, sp_trsRespParams);
            if (status == MBA_RES_SUCCESS)
            {
                OSAL_Free(sp_trsRespParams);
                sp_trsRespParams = NULL;
            }
        }
        else
        {
            sp_trsErrParams = (GATTS_SendErrRespParams_T *)OSAL_Malloc(sizeof(GATTS_SendErrRespParams_T));
            if (sp_trsErrParams == NULL)
            {
                return;
            }
            trsRespErrConnHandle = p_event.connHandle;
            sp_trsErrParams-&gt;reqOpcode = p_event.writeType;
            sp_trsErrParams-&gt;attrHandle = p_event.attrHandle;
            sp_trsErrParams-&gt;errorCode = error;
            status = GATTS_SendErrorResponse(p_event.connHandle, sp_trsErrParams);
            if (status == MBA_RES_SUCCESS)
            {
                OSAL_Free(sp_trsErrParams);
                sp_trsErrParams = NULL;
            }
        }
    }
}
</code></pre></div></div> <p><strong>Tip:</strong> Manual read and write response,permissions and other standard events like GAP and GATT can be executed in the app_ble_handler.</p> <p>Users can exercise various other BLE functionalities by using <a href="../../../docs/api/driver/ble/docs/html/modules.html">BLE Stack API</a></p> <h2 id="where-to-go-from-here"> <a href="readme.html#where-to-go-from-here" aria-labelledby="where-to-go-from-here" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Where to go from here </h2> <ul> <li><a href="../readme.html">BLE Profiles and Services</a></li> </ul> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='http://10.12.80.161:4000/wireless/assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
